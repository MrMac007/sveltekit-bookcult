import"../chunks/CWj6FrbW.js";import{p as se,f as p,D as $e,m as O,a,b as oe,c as n,r as i,e as be,d as A,t as y,s,i as t,g as r,j as we,k as ye,l as Ce,h as C,n as m,$ as ke,o as te}from"../chunks/OF3EgmvO.js";import{i as D}from"../chunks/wlFoaW_T.js";import{h as Pe}from"../chunks/Dss-VGMa.js";import{c as Be,b as Ue,d as ze,B as re}from"../chunks/DrwkzclB.js";import{I as E}from"../chunks/DaUql_yn.js";import{L as G}from"../chunks/DJs6wcy-.js";import{C as Me,B as Ae}from"../chunks/DzfTeG5e.js";import{C as Le}from"../chunks/DBJYfggh.js";import{C as je}from"../chunks/CIP4LxHI.js";import{C as Ie,a as Se}from"../chunks/BNGQdwad.js";import{c as Te}from"../chunks/BUrUeTJj.js";import{g as ae}from"../chunks/Dky2jAKs.js";import{U as qe}from"../chunks/DHWJupCZ.js";import{M as He,L as De}from"../chunks/f9uGIIki.js";import{L as Ee}from"../chunks/peaLEW31.js";var Ge=p('<div data-slot="card-footer"><!></div>');function Oe(j,k){se(k,!0);var g=Ge(),$=n(g);$e($,()=>k.children),i(g),O(_=>ze(g,1,_),[()=>Be(Ue("flex items-center px-6 [.border-t]:pt-6",k.class))]),a(j,g),oe()}var Ve=p('<meta name="application-name" content="BookCult"/> <meta property="og:site_name" content="BookCult"/>',1),We=p('<div class="mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-primary/10"><!></div> <!> <!>',1),Fe=p('<div class="rounded-md bg-destructive/10 p-3 text-sm text-destructive"> </div>'),Je=p('<div class="rounded-md bg-green-500/10 p-3 text-sm text-green-600 dark:text-green-400"> </div>'),Ke=p("<!> Creating account...",1),Ne=ye('<svg class="mr-2 h-4 w-4" viewBox="0 0 24 24"><path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg> Continue with Google',1),Qe=p('<!> <!> <form class="space-y-4" name="bookcult-signup" data-form-type="bookcult-registration"><div class="space-y-2"><!> <div class="relative"><!> <!></div> <p class="text-xs text-muted-foreground">3-20 characters, lowercase letters, numbers, and underscores only</p></div> <div class="space-y-2"><!> <div class="relative"><!> <!></div></div> <div class="space-y-2"><!> <div class="relative"><!> <!></div> <p class="text-xs text-muted-foreground">At least 6 characters</p></div> <!></form> <div class="relative"><div class="absolute inset-0 flex items-center"><span class="w-full border-t"></span></div> <div class="relative flex justify-center text-xs uppercase"><span class="bg-card px-2 text-muted-foreground">Or continue with</span></div></div> <!>',1),Re=p('<p class="text-center text-sm text-muted-foreground w-full"> <a href="/login" class="font-semibold text-primary hover:underline">Sign in</a></p>'),Xe=p("<!> <!> <!>",1),Ye=p('<div class="flex min-h-screen items-center justify-center px-6 py-12"><div class="absolute inset-0 -z-10 bg-gradient-to-br from-primary/10 via-accent/5 to-background"></div> <!></div>');function ft(j,k){se(k,!0);let g=C(""),$=C(""),_=C(""),l=C(!1),u=C(""),P=C("");const V=Te();function le(d){const v=d.target;t(_,v.value.toLowerCase().replace(/[^a-z0-9_]/g,""),!0)}async function ne(d){if(d.preventDefault(),t(l,!0),t(u,""),t(P,""),r($).length<6){t(u,"Password must be at least 6 characters"),t(l,!1);return}if(r(_).length<3){t(u,"Username must be at least 3 characters"),t(l,!1);return}try{const{data:v,error:B}=await V.auth.signUp({email:r(g),password:r($),options:{data:{username:r(_),display_name:r(_)}}});if(B){t(u,B.message,!0);return}if(v.user){if(v.user.identities&&v.user.identities.length===0){t(u,"This email is already registered. Please sign in instead.");return}v.session?(t(P,"Account created successfully!"),setTimeout(()=>{ae("/discover")},1e3)):(t(P,"Please check your email to verify your account!"),setTimeout(()=>{ae("/login")},2e3))}}catch(v){t(u,"An unexpected error occurred"),console.error(v)}finally{t(l,!1)}}async function ie(){t(l,!0),t(u,"");try{const{error:d}=await V.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});d&&(t(u,d.message,!0),t(l,!1))}catch(d){t(u,"An unexpected error occurred"),console.error(d),t(l,!1)}}var I=Ye();Pe("z5wozd",d=>{var v=Ve();m(2),be(()=>{ke.title="Sign Up - BookCult"}),a(d,v)});var de=s(n(I),2);Me(de,{class:"w-full max-w-md",children:(d,v)=>{var B=Xe(),W=A(B);Ie(W,{class:"space-y-1 text-center",children:(U,J)=>{var f=We(),h=A(f),S=n(h);Ae(S,{class:"h-6 w-6 text-primary"}),i(h);var z=s(h,2);Se(z,{class:"page-heading text-2xl",children:(x,M)=>{m();var b=y("Create an account");a(x,b)},$$slots:{default:!0}});var T=s(z,2);je(T,{class:"text-sm text-muted-foreground",children:(x,M)=>{m();var b=y("Begin your reading journey with new worlds to explore.");a(x,b)},$$slots:{default:!0}}),a(U,f)},$$slots:{default:!0}});var F=s(W,2);Le(F,{class:"space-y-4",children:(U,J)=>{var f=Qe(),h=A(f);{var S=e=>{var c=Fe(),o=n(c,!0);i(c),O(()=>te(o,r(u))),a(e,c)};D(h,e=>{r(u)&&e(S)})}var z=s(h,2);{var T=e=>{var c=Je(),o=n(c,!0);i(c),O(()=>te(o,r(P))),a(e,c)};D(z,e=>{r(P)&&e(T)})}var x=s(z,2),M=n(x),b=n(M);G(b,{for:"username",children:(e,c)=>{m();var o=y("Username");a(e,o)},$$slots:{default:!0}});var K=s(b,2),N=n(K);qe(N,{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"});var ue=s(N,2);E(ue,{id:"username",type:"text",name:"bookcult-username",placeholder:"bookworm",class:"pl-9",oninput:le,required:!0,get disabled(){return r(l)},minlength:3,maxlength:20,autocomplete:"username",get value(){return r(_)},set value(e){t(_,e,!0)}}),i(K),m(2),i(M);var q=s(M,2),Q=n(q);G(Q,{for:"email",children:(e,c)=>{m();var o=y("Email");a(e,o)},$$slots:{default:!0}});var R=s(Q,2),X=n(R);He(X,{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"});var ve=s(X,2);E(ve,{id:"email",type:"email",name:"bookcult-signup-email",placeholder:"name@bookcult.com",class:"pl-9",required:!0,get disabled(){return r(l)},autocomplete:"email",get value(){return r(g)},set value(e){t(g,e,!0)}}),i(R),i(q);var H=s(q,2),Y=n(H);G(Y,{for:"password",children:(e,c)=>{m();var o=y("Password");a(e,o)},$$slots:{default:!0}});var Z=s(Y,2),ee=n(Z);De(ee,{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"});var me=s(ee,2);E(me,{id:"password",type:"password",name:"bookcult-signup-password",placeholder:"••••••••",class:"pl-9",required:!0,get disabled(){return r(l)},minlength:6,autocomplete:"new-password",get value(){return r($)},set value(e){t($,e,!0)}}),i(Z),m(2),i(H);var pe=s(H,2);re(pe,{type:"submit",class:"w-full tap-target",get disabled(){return r(l)},children:(e,c)=>{var o=we(),ge=A(o);{var _e=w=>{var L=Ke(),xe=A(L);Ee(xe,{class:"mr-2 h-4 w-4 animate-spin"}),m(),a(w,L)},he=w=>{var L=y("Create Account");a(w,L)};D(ge,w=>{r(l)?w(_e):w(he,!1)})}a(e,o)},$$slots:{default:!0}}),i(x);var fe=s(x,4);re(fe,{type:"button",variant:"outline",class:"w-full tap-target",onclick:ie,get disabled(){return r(l)},children:(e,c)=>{var o=Ne();m(),a(e,o)},$$slots:{default:!0}}),Ce("submit",x,ne),a(U,f)},$$slots:{default:!0}});var ce=s(F,2);Oe(ce,{children:(U,J)=>{var f=Re(),h=n(f);h.nodeValue="Already have an account?  ",m(),i(f),a(U,f)},$$slots:{default:!0}}),a(d,B)},$$slots:{default:!0}}),i(I),a(j,I),oe()}export{ft as component};
