import"../chunks/CWj6FrbW.js";import{j as at,d as $,a as t,p as Gt,h as _t,V as Ht,b as Jt,f as l,c as s,g as e,s as n,m,i as W,n as q,r,o as E,t as Ct}from"../chunks/OF3EgmvO.js";import{i as _}from"../chunks/wlFoaW_T.js";import{I as Qt,s as Ut,C as jt,B as Tt,e as At,i as zt}from"../chunks/DzfTeG5e.js";import{a as pt,e as ht}from"../chunks/DECfYjIR.js";import{B as et,s as rt,r as gt,a as xt}from"../chunks/DrwkzclB.js";import{a as $t}from"../chunks/Dky2jAKs.js";import{A as Vt,B as Nt}from"../chunks/BGciXxwI.js";import{C as Rt}from"../chunks/DBJYfggh.js";import{C as Lt,a as Ot}from"../chunks/BNGQdwad.js";import{I as Yt}from"../chunks/DaUql_yn.js";import{B as Mt}from"../chunks/BMF07ZcG.js";import"../chunks/gg-Huw4A.js";import{l as Kt,s as Wt}from"../chunks/QIIHtePh.js";import{P as Dt}from"../chunks/CpRjf1fX.js";import{T as Xt}from"../chunks/CbkV8qYI.js";import{S as Zt}from"../chunks/B5w8-l14.js";function te(st,f){const B=Kt(f,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];Qt(st,Wt({name:"arrow-left"},()=>B,{get iconNode(){return F},children:(J,X)=>{var Z=at(),ot=$(Z);Ut(ot,f,"default",{}),t(J,Z)},$$slots:{default:!0}}))}var ee=l("<!> Back to Group",1),re=l("<!> Add Books",1),ae=l('<p class="text-sm text-muted-foreground">Searching...</p>'),se=l('<img class="h-full w-full object-cover"/>'),oe=l('<div class="flex h-full w-full items-center justify-center"><!></div>'),le=l('<p class="mt-1 text-xs text-muted-foreground line-clamp-1"> </p>'),ie=l('<p class="mt-1 text-xs text-muted-foreground"> </p>'),de=l('<form method="POST" action="?/addBook"><input type="hidden" name="bookData"/> <!></form>'),ne=l('<div class="flex gap-3 rounded-lg border p-3"><div class="relative h-24 w-16 flex-shrink-0 overflow-hidden rounded bg-muted"><!></div> <div class="flex-1 min-w-0"><h4 class="font-semibold line-clamp-2 text-sm"> </h4> <!> <!></div> <div class="flex-shrink-0"><!></div></div>'),ve=l('<div class="space-y-3 max-h-[600px] overflow-y-auto"></div>'),ue=l('<p class="text-sm text-muted-foreground">No books found</p>'),ce=l('<div class="space-y-4"><div><!></div> <!></div>'),fe=l("<!> <!>",1),me=l("<!> ",1),_e=l('<img class="h-full w-full object-cover"/>'),pe=l('<div class="flex h-full w-full items-center justify-center"><!></div>'),he=l('<p class="mt-1 text-xs text-muted-foreground line-clamp-1"> </p>'),ge=l("<!> Current Reading",1),xe=l('<form method="POST" action="?/setAsCurrentBook" class="mt-2"><input type="hidden" name="bookId"/> <!></form>'),$e=l('<div class="flex gap-3 rounded-lg border p-3"><div class="relative h-24 w-16 flex-shrink-0 overflow-hidden rounded bg-muted"><!></div> <div class="flex-1 min-w-0"><h4 class="font-semibold line-clamp-2 text-sm"> </h4> <!> <!></div> <div class="flex-shrink-0"><form method="POST" action="?/removeBook"><input type="hidden" name="groupBookId"/> <!></form></div></div>'),ye=l('<div class="space-y-3 max-h-[600px] overflow-y-auto"></div>'),we=l('<div class="flex flex-col items-center justify-center py-12 text-center"><!> <h3 class="text-lg font-semibold mb-2">No books in reading list</h3> <p class="text-sm text-muted-foreground">Search and add books to get started</p></div>'),Pe=l("<!> <!>",1),be=l('<div class="mx-auto max-w-5xl px-4 py-6"><div class="mb-6 flex items-center gap-4"><!> <div class="flex-1"><h1 class="page-heading"> </h1> <p class="text-sm text-muted-foreground"><span class="meta-label">Manage reading list</span></p></div></div> <div class="grid gap-6 lg:grid-cols-2"><!> <!></div></div>');function Fe(st,f){Gt(f,!0);let B=_t(""),F=_t(Ht([])),J=_t(!1),X=null;async function Z(){if(!e(B).trim()||e(B).length<2){W(F,[],!0);return}W(J,!0);try{const z=await(await fetch(`/api/books/search?q=${encodeURIComponent(e(B))}`)).json();z.books&&W(F,z.books,!0)}catch(k){console.error("Error searching books:",k)}finally{W(J,!1)}}function ot(k){const z=k.target;W(B,z.value,!0),X&&clearTimeout(X),X=setTimeout(()=>{Z()},500)}function qt(k){return f.data.books.some(z=>z.google_books_id===k)}Vt(st,{title:"Manage Reading List",children:(k,z)=>{var lt=be(),it=s(lt),yt=s(it);et(yt,{get href(){return`/groups/${f.data.group.id??""}`},variant:"ghost",size:"sm",children:(Q,kt)=>{var I=ee(),N=$(I);te(N,{class:"mr-2 h-4 w-4"}),q(),t(Q,I)},$$slots:{default:!0}});var wt=n(yt,2),Pt=s(wt),Et=s(Pt,!0);r(Pt),q(2),r(wt),r(it);var bt=n(it,2),Bt=s(bt);jt(Bt,{children:(Q,kt)=>{var I=fe(),N=$(I);Lt(N,{children:(R,nt)=>{Ot(R,{class:"flex items-center gap-2",children:(p,L)=>{var y=re(),S=$(y);Dt(S,{class:"h-5 w-5"}),q(),t(p,y)},$$slots:{default:!0}})},$$slots:{default:!0}});var dt=n(N,2);Rt(dt,{children:(R,nt)=>{var p=ce(),L=s(p),y=s(L);Yt(y,{type:"text",placeholder:"Search for books...",get value(){return e(B)},oninput:ot}),r(L);var S=n(L,2);{var h=g=>{var u=ae();t(g,u)},w=g=>{var u=at(),U=$(u);{var V=C=>{var j=ve();At(j,21,()=>e(F),zt,(O,v)=>{var P=ne(),T=s(P),ut=s(T);{var ct=a=>{var d=se();m(()=>{rt(d,"src",e(v).cover_url),rt(d,"alt",e(v).title)}),t(a,d)},ft=a=>{var d=oe(),x=s(d);Nt(x,{class:"h-8 w-8 text-muted-foreground"}),r(d),t(a,d)};_(ut,a=>{e(v).cover_url?a(ct):a(ft,!1)})}r(T);var Y=n(T,2),G=s(Y),K=s(G,!0);r(G);var H=n(G,2);{var mt=a=>{var d=le(),x=s(d,!0);r(d),m(M=>E(x,M),[()=>e(v).authors.join(", ")]),t(a,d)};_(H,a=>{e(v).authors&&e(v).authors.length>0&&a(mt)})}var o=n(H,2);{var i=a=>{var d=ie(),x=s(d,!0);r(d),m(M=>E(x,M),[()=>new Date(e(v).published_date).getFullYear()]),t(a,d)};_(o,a=>{e(v).published_date&&a(i)})}r(Y);var c=n(Y,2),A=s(c);{var b=a=>{Mt(a,{variant:"secondary",class:"text-xs",children:(d,x)=>{q();var M=Ct("In List");t(d,M)},$$slots:{default:!0}})},tt=a=>{var d=de(),x=s(d);gt(x);var M=n(x,2);et(M,{type:"submit",size:"sm",children:(D,It)=>{Dt(D,{class:"h-4 w-4"})},$$slots:{default:!0}}),r(d),pt(d,(D,It)=>{var St;return(St=ht)==null?void 0:St(D,It)},()=>()=>async({result:D})=>{D.type==="success"&&await $t()}),m(D=>xt(x,D),[()=>JSON.stringify(e(v))]),t(a,d)};_(A,a=>{qt(e(v).google_books_id)?a(b):a(tt,!1)})}r(c),r(P),m(()=>E(K,e(v).title)),t(O,P)}),r(j),t(C,j)},vt=C=>{var j=at(),O=$(j);{var v=P=>{var T=ue();t(P,T)};_(O,P=>{e(B).trim().length>0&&P(v)},!0)}t(C,j)};_(U,C=>{e(F).length>0?C(V):C(vt,!1)},!0)}t(g,u)};_(S,g=>{e(J)?g(h):g(w,!1)})}r(p),t(R,p)},$$slots:{default:!0}}),t(Q,I)},$$slots:{default:!0}});var Ft=n(Bt,2);jt(Ft,{children:(Q,kt)=>{var I=Pe(),N=$(I);Lt(N,{children:(R,nt)=>{Ot(R,{class:"flex items-center gap-2",children:(p,L)=>{var y=me(),S=$(y);Tt(S,{class:"h-5 w-5"});var h=n(S);m(()=>E(h,` Reading List (${f.data.books.length??""})`)),t(p,y)},$$slots:{default:!0}})},$$slots:{default:!0}});var dt=n(N,2);Rt(dt,{children:(R,nt)=>{var p=at(),L=$(p);{var y=h=>{var w=ye();At(w,21,()=>f.data.books,zt,(g,u)=>{var U=$e(),V=s(U),vt=s(V);{var C=o=>{var i=_e();m(()=>{rt(i,"src",e(u).cover_url),rt(i,"alt",e(u).title)}),t(o,i)},j=o=>{var i=pe(),c=s(i);Nt(c,{class:"h-8 w-8 text-muted-foreground"}),r(i),t(o,i)};_(vt,o=>{e(u).cover_url?o(C):o(j,!1)})}r(V);var O=n(V,2),v=s(O),P=s(v,!0);r(v);var T=n(v,2);{var ut=o=>{var i=he(),c=s(i,!0);r(i),m(A=>E(c,A),[()=>e(u).authors.join(", ")]),t(o,i)};_(T,o=>{e(u).authors&&e(u).authors.length>0&&o(ut)})}var ct=n(T,2);{var ft=o=>{Mt(o,{variant:"default",class:"mt-2 text-xs",children:(i,c)=>{var A=ge(),b=$(A);Zt(b,{class:"mr-1 h-3 w-3"}),q(),t(i,A)},$$slots:{default:!0}})},Y=o=>{var i=xe(),c=s(i);gt(c);var A=n(c,2);et(A,{type:"submit",size:"sm",variant:"outline",class:"text-xs h-7",children:(b,tt)=>{q();var a=Ct("Set as Current");t(b,a)},$$slots:{default:!0}}),r(i),pt(i,(b,tt)=>{var a;return(a=ht)==null?void 0:a(b,tt)},()=>()=>async({result:b})=>{b.type==="success"&&await $t()}),m(()=>xt(c,e(u).id)),t(o,i)};_(ct,o=>{f.data.group.currentBookId===e(u).id?o(ft):o(Y,!1)})}r(O);var G=n(O,2),K=s(G),H=s(K);gt(H);var mt=n(H,2);et(mt,{type:"submit",size:"sm",variant:"ghost",class:"text-destructive hover:text-destructive",children:(o,i)=>{Xt(o,{class:"h-4 w-4"})},$$slots:{default:!0}}),r(K),pt(K,(o,i)=>{var c;return(c=ht)==null?void 0:c(o,i)},()=>()=>async({result:o})=>{o.type==="success"&&await $t()}),r(G),r(U),m(()=>{E(P,e(u).title),xt(H,e(u).groupBookId)}),t(g,U)}),r(w),t(h,w)},S=h=>{var w=we(),g=s(w);Tt(g,{class:"h-12 w-12 text-muted-foreground mb-3"}),q(4),r(w),t(h,w)};_(L,h=>{f.data.books.length>0?h(y):h(S,!1)})}t(R,p)},$$slots:{default:!0}}),t(Q,I)},$$slots:{default:!0}}),r(bt),r(lt),m(()=>E(Et,f.data.group.name)),t(k,lt)},$$slots:{default:!0}}),Jt()}export{Fe as component};
