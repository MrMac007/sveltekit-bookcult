import"../chunks/CWj6FrbW.js";import{j as J,d as z,a as d,p as fe,b as pe,f as v,c as a,r as o,n as F,s as n,g as s,m as h,o as x,l as ue}from"../chunks/OF3EgmvO.js";import{i as y}from"../chunks/wlFoaW_T.js";import{I as K,s as Q,e as _e,C as he}from"../chunks/DzfTeG5e.js";import{B as G,r as xe,s as w,a as ge}from"../chunks/DrwkzclB.js";import{A as be,B as $e}from"../chunks/BGciXxwI.js";import{C as ke}from"../chunks/DBJYfggh.js";import{S as ye}from"../chunks/5TQJUeYt.js";import{B as we}from"../chunks/DxOzrAxA.js";import"../chunks/gg-Huw4A.js";import{l as V,s as W}from"../chunks/QIIHtePh.js";import{T as Be}from"../chunks/CbkV8qYI.js";function Pe(g,i){const b=V(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c=[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]];K(g,W({name:"calendar"},()=>b,{get iconNode(){return c},children:(B,$)=>{var m=J(),k=z(m);Q(k,i,"default",{}),d(B,m)},$$slots:{default:!0}}))}function Ce(g,i){const b=V(i,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.460.1 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"}]];K(g,W({name:"square-pen"},()=>b,{get iconNode(){return c},children:(B,$)=>{var m=J(),k=z(m);Q(k,i,"default",{}),d(B,m)},$$slots:{default:!0}}))}var je=v('<div class="flex flex-col items-center justify-center py-12 text-center"><div class="mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-primary/10"><!></div> <h2 class="mb-2 text-xl font-semibold">No completed books yet</h2> <p class="max-w-md text-sm text-muted-foreground">Mark books as complete from your wishlist or currently reading list to see them here.</p></div>'),ze=v('<img class="h-full w-full object-cover"/>'),Me=v('<div class="flex h-full w-full items-center justify-center"><!></div>'),Se=v('<p class="mt-1 text-sm text-muted-foreground"> </p>'),Ne=v('<div class="mt-3"><!></div>'),De=v('<p class="mt-2 line-clamp-2 text-sm text-muted-foreground"> </p>'),Re=v("<!> ",1),Ae=v("<!> Remove",1),Ie=v('<div class="flex gap-4"><a class="relative h-40 w-28 flex-shrink-0 overflow-hidden rounded-md bg-muted transition-opacity hover:opacity-80"><!></a> <div class="flex flex-1 flex-col"><div class="flex-1"><a><h3 class="font-semibold leading-tight transition-colors hover:text-primary"> </h3></a> <!> <div class="mt-2 flex items-center gap-1.5 text-xs text-muted-foreground"><!> <span> </span></div> <!> <!></div> <div class="mt-3 flex flex-wrap gap-2"><a class="flex-1 min-w-[140px]"><!></a> <form method="POST" action="?/remove" class="flex-1 min-w-[140px]"><input type="hidden" name="bookId"/> <!></form></div></div></div>'),Te=v('<div class="space-y-4"><h2 class="text-lg font-semibold"> </h2> <!></div>'),qe=v('<div class="mx-auto max-w-5xl px-4 py-6"><!></div>');function Ze(g,i){fe(i,!0);function b(c){return new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}be(g,{title:"Completed Books",children:(c,B)=>{var $=qe(),m=a($);{var k=p=>{var f=je(),u=a(f),M=a(u);we(M,{class:"h-10 w-10 text-primary"}),o(u),F(4),o(f),d(p,f)},X=p=>{var f=Te(),u=a(f),M=a(u);o(u);var Y=n(u,2);_e(Y,17,()=>i.data.completedBooks,S=>S.books.id,(S,r)=>{he(S,{children:(Z,Ee)=>{ke(Z,{class:"p-4",children:(ee,He)=>{var N=Ie(),P=a(N),te=a(P);{var ae=t=>{var e=ze();h(()=>{w(e,"src",s(r).books.cover_url),w(e,"alt",s(r).books.title)}),d(t,e)},oe=t=>{var e=Me(),l=a(e);$e(l,{class:"h-12 w-12 text-muted-foreground"}),o(e),d(t,e)};y(te,t=>{s(r).books.cover_url?t(ae):t(oe,!1)})}o(P);var T=n(P,2),D=a(T),C=a(D),q=a(C),re=a(q,!0);o(q),o(C);var E=n(C,2);{var se=t=>{var e=Se(),l=a(e);o(e),h(_=>x(l,`by ${_??""}`),[()=>s(r).books.authors.join(", ")]),d(t,e)};y(E,t=>{s(r).books.authors&&s(r).books.authors.length>0&&t(se)})}var R=n(E,2),H=a(R);Pe(H,{class:"h-3.5 w-3.5"});var L=n(H,2),le=a(L);o(L),o(R);var O=n(R,2);{var de=t=>{var e=Ne(),l=a(e);ye(l,{get value(){return s(r).rating.rating},readonly:!0,size:"sm"}),o(e),d(t,e)};y(O,t=>{var e;((e=s(r).rating)==null?void 0:e.rating)!==void 0&&t(de)})}var ie=n(O,2);{var ne=t=>{var e=De(),l=a(e,!0);o(e),h(()=>x(l,s(r).rating.review)),d(t,e)};y(ie,t=>{var e;(e=s(r).rating)!=null&&e.review&&t(ne)})}o(D);var U=n(D,2),j=a(U),ve=a(j);G(ve,{variant:"outline",size:"sm",class:"w-full gap-1.5",children:(t,e)=>{var l=Re(),_=z(l);Ce(_,{class:"h-3.5 w-3.5"});var me=n(_);h(()=>x(me,` ${s(r).rating?"Edit Rating":"Add Rating"}`)),d(t,l)},$$slots:{default:!0}}),o(j);var A=n(j,2),I=a(A);xe(I);var ce=n(I,2);G(ce,{type:"submit",variant:"ghost",size:"sm",class:"w-full gap-1.5 text-destructive hover:text-destructive",children:(t,e)=>{var l=Ae(),_=z(l);Be(_,{class:"h-3.5 w-3.5"}),F(),d(t,l)},$$slots:{default:!0}}),o(A),o(U),o(T),o(N),h(t=>{w(P,"href",`/book/${s(r).books.id}`),w(C,"href",`/book/${s(r).books.id}`),x(re,s(r).books.title),x(le,`Completed ${t??""}`),w(j,"href",`/rate/${s(r).books.id}`),ge(I,s(r).books.id)},[()=>b(s(r).completed_at)]),ue("submit",A,t=>{confirm("Remove this book from completed (and delete rating)?")||t.preventDefault()}),d(ee,N)},$$slots:{default:!0}})},$$slots:{default:!0}})}),o(f),h(()=>x(M,`${i.data.completedBooks.length??""} ${i.data.completedBooks.length===1?"book":"books"} completed`)),d(p,f)};y(m,p=>{!i.data.completedBooks||i.data.completedBooks.length===0?p(k):p(X,!1)})}o($),d(c,$)},$$slots:{default:!0}}),pe()}export{Ze as component};
